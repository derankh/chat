<!DOCTYPE html>
<html>
<head>
  <title>Chat</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background-color: #f4f4f4; }
    #messages { border: 1px solid #ccc; padding: 10px; height: 300px; overflow-y: auto; background: #fff; }
    input, button { padding: 8px; margin-top: 10px; width: calc(100% - 20px); border-radius: 4px; border: 1px solid #ccc; }
    button { cursor: pointer; background-color: #0078D4; color: white; border: none; }
    button:hover { background-color: #005a9e; }
  </style>
</head>
<body>

<h2>Chat</h2>

<div id="messages">Noch keine Nachrichten...</div>

<input type="text" id="username" placeholder="Dein Name" />
<input type="text" id="message" placeholder="Deine Nachricht" />
<button id="sendButton">Senden</button>

<!-- Wichtig: Firebase Version 8.x -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

<script>
  // Firebase Konfiguration
  var firebaseConfig = {
    apiKey: "AIzaSyCBRSH987sliIz7I5a5HRaCLVA0K6igIdc",
    authDomain: "chat-dashbiard.firebaseapp.com",
    databaseURL: "https://chat-dashbiard-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "chat-dashbiard",
    storageBucket: "chat-dashbiard.firebasestorage.app",
    messagingSenderId: "172749077854",
    appId: "1:172749077854:web:4c3fcb144c80ce83eea3cf"
  };

  // Firebase initialisieren
  firebase.initializeApp(firebaseConfig);
  var database = firebase.database();

  document.getElementById('sendButton').addEventListener('click', sendMessage);

  function formatDate(timestamp) {
    var date = new Date(timestamp);
    return date.toLocaleString();
  }

  function sendMessage() {
    var user = document.getElementById('username').value.trim();
    var text = document.getElementById('message').value.trim();
    if(user && text) {
      database.ref('messages').push({
        user: user,
        text: text,
        timestamp: Date.now()
      });
      document.getElementById('message').value = '';
    }
  }

  database.ref('messages').on('child_added', function(snapshot) {
    var msg = snapshot.val();
    var msgElement = document.createElement('div');
    msgElement.innerHTML = '<strong>' + msg.user + '</strong> (' + formatDate(msg.timestamp) + '): ' + msg.text;
    document.getElementById('messages').appendChild(msgElement);
    document.getElementById('messages').scrollTop = document.getElementById('messages').scrollHeight;
  });
</script>

</body>
</html>
